/**
 * angular-pull-to-refresh
 * @version v0.3.0 - 2014-02-10
 * @link https://github.com/mgcrea/angular-pull-to-refresh
 * @author Olivier Louvignes <olivier@mg-crea.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(a){"use strict";angular.module("spica.pullToRefresh",["pascalprecht.translate"]).constant("pullToRefreshConfig",{treshold:60,debounce:400,text:{pull:"PULL",release:"RELEASE",loading:"LOADING"},icon:{pull:"fa fa-arrow-down",release:"fa fa-arrow-up",loading:"fa fa-refresh fa-spin"}}).directive("pullToRefresh",["$compile","$timeout","$q","$translate","pullToRefreshConfig",function(b,c,d,e,f){return{scope:!0,restrict:"A",transclude:!0,templateUrl:"angular-pull-to-refresh.tpl.html",compile:function(){return function(b,e,g){var h=angular.extend({},f,g),i=e.parent(),j=a.ptr=e.children()[0];b.text=h.text,b.icon=h.icon,b.status="pull";var k=function(a){l="release"===a,b.$apply(function(){b.status=a})},l=!1;e.bind("touchmove",function(){var a=i[0].scrollTop;a<-h.treshold&&!l?k("release"):a>-h.treshold&&l&&k("pull")}),e.bind("touchend",function(){if(l){j.style.webkitTransitionDuration=0,j.style.margin="0 auto",k("loading");var a=+new Date;d.when(b.$eval(g.pullToRefresh)).then(function(){var d=+new Date-a;c(function(){j.style.margin="",j.style.webkitTransitionDuration="",b.status="pull"},d<h.debounce?h.debounce-d:0)})}}),b.$on("$destroy",function(){e.unbind("touchmove"),e.unbind("touchend")})}}}}]),angular.module("spica.pullToRefresh").run(["$templateCache",function(a){a.put("angular-pull-to-refresh.tpl.html",'<div class="pull-to-refresh">\n  <i ng-class="icon[status]"></i>&nbsp;\n  <span>{{ text[status] | translate}}</span>\n</div>\n<div ng-transclude></div>\n')}])}(window,document);